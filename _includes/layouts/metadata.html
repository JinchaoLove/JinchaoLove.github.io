{% if site.enable_google_verification or site.enable_bing_verification %}
  <!-- Website verification -->
  {% if site.enable_google_verification %}
    <meta name="google-site-verification" content="{{ site.google_site_verification }}">
  {% endif %}
  {% if site.enable_bing_verification %}
    <meta name="msvalidate.01" content="{{ site.bing_site_verification }}">
  {% endif %}
  <!--
    Avoid warning on Google Chrome Error with Permissions-Policy header:
    Origin trial controlled feature not enabled: 'interest-cohort'.
    see https://stackoverflow.com/a/75119417
  -->
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
{% endif %}

<!-- Standard metadata -->
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta
  name="theme-color"
  media="(prefers-color-scheme: light)"
  content="#f7f7f7">
<meta
  name="theme-color"
  media="(prefers-color-scheme: dark)"
  content="#1b1b1e">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

{% if site.icon.size <= 4 %}
  <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>{{ site.icon }}</text></svg>">
{% elsif site.icon != blank %}
  <link rel="shortcut icon" href="{{ site.icon | prepend: '/assets/img/' | relative_url }}">
{% endif %}

{% if page.url == '/' | relative_url %}
  {% assign title = site.title %}
{% else %}
  {% assign title = page.title %}
{% endif %}

<title>{{ title }}</title>
<meta name="author" content="{{ site.social.name }}">

<meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
{% if page.keywords or site.keywords %}
  <meta name="keywords" content="{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.keywords }}{% endif %}">
{% endif %}

{% assign is_blog_post = false %}
{% if page.url contains '/blog/' %}
  {% assign is_blog_post = true %}
{% endif %}

{% if site.serve_og_meta %}
  <!-- OpenGraph -->
  <meta property="og:site_name" content="{{ title }}">
  <meta property="og:type" content="{% if is_blog_post %}article{% else %}website{% endif %}">
  <meta property="og:title" content="{% if page.title %}{{ title }} | {{ page.title }}{% else %}{{ title }}{% endif %}">
  <meta property="og:url" content="{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  {% if page.image or site.image %}
    <meta property="og:image" content="{% if page.image %}{{ page.image.path | default: page.image }}{% else %}{{ site.social_preview_image }}{% endif %}">
  {% endif %}
  <meta property="og:locale" content="{{ site.lang }}">

    <!-- Twitter card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  {% if page.og_image or site.og_image %}
    <meta name="twitter:image" content="{% if page.og_image %}{{ page.og_image }}{% else %}{{ site.og_image }}{% endif %}">
  {% endif %}
  {% if site.twitter.username %}
    <meta name="twitter:site" content="@{{ site.twitter.username }}">
    <meta name="twitter:creator" content="@{{ site.twitter.username }}">
  {% endif %}
{% endif %}

{% if site.serve_schema_org %}
  <!-- Schema.org -->
  {% comment %} Social links generator for "sameAs schema" {% endcomment %}
  {% assign sameaslinks = '' | split: ',' %}
  {% if site.github.username %}
    {% capture link %}https://github.com/{{ site.github.username }}{% endcapture %}
    {% assign sameaslinks = sameaslinks | push: link %}
  {% endif %}
  {% if site.twitter.username %}
    {% capture link %}https://twitter.com/{{ site.twitter.username }}{% endcapture %}
    {% assign sameaslinks = sameaslinks | push: link %}
  {% endif %}

  {% if site.social.links %}
    {% for link in site.social.links %}
      {% if link contains 'github' or link contains 'twitter' %}
        {% continue %}
      {% else %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% if sameaslinks != blank %}
    {% assign sameaslinks = sameaslinks | split: '' %}
  {% endif %}

  <script type="application/ld+json">
    {
      "author": {
        "@type": "Person",
        "name": "{{ site.social.name }}"
      },
      "url": "{{ page.url | prepend: site.baseurl | prepend: site.url }}",
      "@type": "{% if is_blog_post %} BlogPosting{% else %}WebSite{% endif %}",
      "description": "{% if page.description %} {{ page.description }} {% else if site.description %}{{ site.description }}{% endif %}",
      "headline": "{% if page.title %} {{ page.title }} {% else %}{{ site.title }}{% endif %}",
      {% if sameaslinks != blank %}
        "sameAs": {{ sameaslinks }},
        {% endif %}
        "name": "{{ site.social.name }}",
        "@context": "https://schema.org"
      }
  </script>
{% endif %}