<head>
  <link rel="canonical" href="{{ page.url | replace:'index.html', '' | absolute_url }}">

  {% include layouts/metadata.html %}

  {% if site.data.origin[type].webfonts contains '://' %}
    {% for cdn in site.data.origin[type].cdns %}
      <link
        rel="preconnect"
        href="{{ cdn.url }}"
        {{ cdn.args }}>
      <link
        rel="dns-prefetch"
        href="{{ cdn.url }}"
        {{ cdn.args }}>
    {% endfor %}
    <link rel="stylesheet" href="{{ site.data.origin[type].webfonts }}">
  {% else %}
    <link href="{{ site.data.origin[type].webfonts | relative_url }}" rel="stylesheet">
  {% endif %}

  <!-- GA -->
  {% if jekyll.environment == 'production' and site.google_analytics.id != empty and site.google_analytics.id %}
    <link
      rel="preconnect"
      href="https://www.google-analytics.com"
      crossorigin="use-credentials">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">

    <link
      rel="preconnect"
      href="https://www.googletagmanager.com"
      crossorigin="anonymous">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  {% endif %}

  <!-- Bootstrap -->
  <link rel="stylesheet" href="{{ site.data.origin[type].bootstrap.css | relative_url }}">

    <!-- Font Awesome -->
  <link rel="stylesheet" href="{{ site.data.origin[type].fontawesome.css | relative_url }}">

  <link rel="stylesheet" href="{{ '/assets/css/theme.css' | relative_url }}">

  {% assign toc = page.toc | default: site.toc | default: true %}
    {% if toc %}
    <!-- TOC -->
    <link rel="stylesheet" href="{{ site.data.origin[type].toc.css | relative_url }}">
  {% endif %}

  {% assign lazy_polyfill = page.lazy_polyfill | default: site.lazy_polyfill | default: true %}
    {% if lazy_polyfill %}
    <!-- Lazy Polyfill -->
    <link
      defer
      rel="stylesheet"
      href="{{ site.data.origin[type]['lazy-polyfill'].css | relative_url }}">
  {% endif %}

  {% assign magnific_popup = page.magnific_popup | default: site.magnific_popup | default: true %}
    {% if magnific_popup %}
    <!-- Manific Popup -->
    <link
      defer
      rel="stylesheet"
      href="{{ site.data.origin[type].magnific-popup.css | relative_url }}">
  {% endif %}

  {% if site.comments.provider == "waline" %}
    <!-- Waline -->
    <link rel="stylesheet" href="{{ site.data.origin[type].waline.css | relative_url }}">
  {% endif %}

  <!-- JavaScript -->

  {% unless site.theme_mode %}
    {% include scripts/mode-toggle.html %}
  {% endunless %}

  {% include scripts/markmap.html %}
</head>